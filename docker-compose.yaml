volumes:
  cargo:

services:

  rst:
    profiles:
      - jrpk
    build: .
    environment:
      - TOKIO_CONSOLE_BIND=0.0.0.0:6669
      - RUST_LOG=trace,tokio::task=info
    volumes:
      - .:/jrpk
      - cargo:/usr/local/cargo
    working_dir: /jrpk

  trc:
    build: .
    command: ['tokio-console', 'http://jrpk:6669']

  cli:
    build: .
    command: ['curl', 'http://jrpk:1133', '<<<', '12345']
